let usuario,contraseña;function iniciarApp(){mostrarSecciones(),validarFormulario(),validarPin(),login(),consultarSaldo(),retirar(),cerrarSesion(),regresar(),RegresarRetirar()}function mostrarSecciones(){const e=document.querySelector("#ingresar-cliente"),t=document.querySelector("#administrativo");document.querySelector("#cliente");e.addEventListener("click",(function(e){e.preventDefault();document.querySelector(".ocultar-seccion").classList.remove("ocultar-seccion"),t.classList.add("ocultar-seccion")}))}function validarFormulario(){document.querySelector("#iniciar-administrativo").addEventListener("click",e=>{e.preventDefault();const t=document.querySelector("#cuenta");""!==document.querySelector("#password-administrativo").value&&""!==t.value||mostrarAlerta("Debe rellenar todos los campos","error",1)});document.querySelector("#iniciar-sesion").addEventListener("click",e=>{e.preventDefault();const t=document.querySelector("#numero-tarjeta"),o=document.querySelector("#pin");""!==t.value&&""!==o.value||mostrarAlerta("Debe rellenar todos los campos","error",0)})}function validarPin(){document.querySelector("#pin").addEventListener("input",e=>{(e.target.value.length>4||e.target.value.length<4)&&mostrarAlerta("El tamaño del pin debe de ser de 4 digítos","error",0)})}function mostrarAlerta(e,t,o){if(document.querySelector(".alerta"))return;const r=document.createElement("DIV");if(r.textContent=e,r.classList.add("alerta"),"error"===t&&r.classList.add("error"),1==o){document.querySelector("#formulario-alerta").appendChild(r)}else{document.querySelector("#formulario-alerta2").appendChild(r)}setTimeout(()=>{r.remove()},3e3)}function login(){document.querySelector("#iniciar-sesion").addEventListener("click",(function(e){usuario=document.querySelector("#numero-tarjeta").value,pin=document.querySelector("#pin").value,ConectarAjaxCuenta()}))}function ConectarAjaxCuenta(){const e=new XMLHttpRequest;e.open("GET","Controlador/login/cuenta.php",!0),e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){JSON.parse(this.responseText).forEach(e=>{if(e.pin==pin&&e.NumeroTarjeta==usuario){document.querySelector("#cliente").classList.add("ocultar-seccion");document.querySelector("#contenedor-menu").classList.remove("ocultar-seccion");document.querySelector("#heading").classList.add("ocultar-seccion")}else mostrarAlerta("Error en la autentificación","error",0)})}},e.send()}function cerrarSesion(){document.querySelector("#cerrar-sesion").addEventListener("click",(function(){document.querySelector("#administrativo").classList.remove("ocultar-seccion");document.querySelector("#contenedor-menu").classList.add("ocultar-seccion");document.querySelector("#heading").classList.remove("ocultar-seccion")}))}function consultarSaldo(){document.querySelector("#consultar-saldo").addEventListener("click",(function(){ConectarAjaxCuentaConsulta()}))}function ConectarAjaxCuentaConsulta(){const e=new XMLHttpRequest;e.open("GET","Controlador/consultaSaldo/consulta.php",!0),e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){const e=JSON.parse(this.responseText);console.log(e),e.forEach(e=>{if(e.pin==pin&&e.NumeroTarjeta==usuario){const t=document.querySelector("#seccion-consultar");t.classList.remove("ocultar-seccion");document.querySelector("#contenedor-menu").classList.add("ocultar-seccion");document.querySelector("#heading").classList.add("ocultar-seccion");document.querySelector("#contenedor-bottonRegresar").classList.remove("ocultar-seccion");const o=e.nombre,r=e.apellido_paterno,n=e.apellido_materno,c=e.FechaExpiracion,a=e.saldo,s=document.createElement("P"),i=document.createElement("P"),u=document.createElement("P"),l=document.querySelector(".contenedor-consulta");l&&l.remove();const d=document.createElement("DIV");d.classList.add("contenedor-consulta"),s.innerHTML=`Buen día ${o} ${r} ${n}`,d.appendChild(s),i.innerHTML=` Su saldo es de <span> $ ${a}</span>`,d.appendChild(i),u.innerHTML=`Le recordamos que su tarjeta  <span>${usuario}</span> expira el <span>${c}</span>`,d.appendChild(u),t.appendChild(d)}})}},e.send()}function regresar(){document.querySelector("#regresar").addEventListener("click",(function(){document.querySelector("#contenedor-menu").classList.remove("ocultar-seccion");document.querySelector("#seccion-consultar").classList.add("ocultar-seccion");document.querySelector("#contenedor-bottonRegresar").classList.add("ocultar-seccion")}))}function retirar(){document.querySelector("#retirar").addEventListener("click",(function(){ConectarAjaxRetirar()}))}function ConectarAjaxRetirar(){const e=new XMLHttpRequest;e.open("GET","Controlador/retirar/retirar.php",!0),e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){const e=JSON.parse(this.responseText);console.log(e),e.forEach(e=>{if(e.pin==pin&&e.NumeroTarjeta==usuario){document.querySelector("#contenedor-menu").classList.add("ocultar-seccion");document.querySelector("#heading").classList.add("ocultar-seccion");document.querySelector("#contenedor-bottonRetirar").classList.remove("ocultar-seccion");document.querySelector("#contenedor-retirar").classList.remove("ocultar-seccion");document.querySelector("#contenedor-aceptar").classList.remove("ocultar-seccion");const t=e.saldo;let o;document.querySelector("#menu-retirar").addEventListener("click",e=>{const r=e.target;console.log(r),o=e.target.value;document.querySelector("#aceptar-retiro").addEventListener("click",()=>{if(t>=o){let e=t-o;console.log(e)}else console.log("No tienes fondos suficientes")})});const r=document.querySelector(".contenedor-consulta");r&&r.remove();const n=document.createElement("DIV");n.classList.add("contenedor-consulta"),parrafo.innerHTML=`Buen día ${nombre} ${apellidoPaterno} ${apellidoMaterno}`,n.appendChild(parrafo),parrafo2.innerHTML=` Su saldo es de <span> $ ${t}</span>`,n.appendChild(parrafo2),parrafo3.innerHTML=`Le recordamos que su tarjeta  <span>${numeroTarjeta}</span> expira el <span>${fechaExpiracion}</span>`,n.appendChild(parrafo3),seccionConsultar.appendChild(n)}})}},e.send()}function RegresarRetirar(){document.querySelector("#contenedor-bottonRetirar").addEventListener("click",(function(){document.querySelector("#contenedor-bottonRetirar").classList.add("ocultar-seccion");document.querySelector("#contenedor-menu").classList.remove("ocultar-seccion");document.querySelector("#contenedor-retirar").classList.add("ocultar-seccion");document.querySelector("#contenedor-aceptar").classList.add("ocultar-seccion")}))}document.addEventListener("DOMContentLoaded",(function(){iniciarApp()}));
//# sourceMappingURL=bundle.js.map
